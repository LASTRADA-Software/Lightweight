<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lightweight: Lightweight/SqlSchema.hpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lightweight<span id="projectnumber">&#160;0.20260213.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/d1c/SqlSchema_8hpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">SqlSchema.hpp</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// SPDX-License-Identifier: Apache-2.0</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;Api.hpp&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;SqlQuery/MigrationPlan.hpp&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;format&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;string_view&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">namespace </span>Lightweight</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>{</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">class </span>SqlStatement;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="keyword">namespace </span>SqlSchema</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>{</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <span class="keyword">namespace </span>detail</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    {</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>        <span class="comment">// NOLINTNEXTLINE(readability-identifier-naming)</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        <span class="keyword">constexpr</span> std::string_view rtrim(std::string_view value) <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>        {</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>            <span class="keywordflow">while</span> (!value.empty() &amp;&amp; (std::isspace(value.back()) || value.back() == <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>                value.remove_suffix(1);</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>            <span class="keywordflow">return</span> value;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>        }</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    } <span class="comment">// namespace detail</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="keyword">struct </span>FullyQualifiedTableName</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    {</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>        std::string catalog;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>        std::string schema;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        std::string table;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        <span class="keywordtype">bool</span> operator==(FullyQualifiedTableName <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        {</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>            <span class="keywordflow">return</span> catalog == other.catalog &amp;&amp; schema == other.schema &amp;&amp; table == other.table;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>        }</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        <span class="keywordtype">bool</span> operator!=(FullyQualifiedTableName <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>            <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other);</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        }</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        <span class="keywordtype">bool</span> operator&lt;(FullyQualifiedTableName <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>            <span class="keywordflow">return</span> std::tie(catalog, schema, table) &lt; std::tie(other.catalog, other.schema, other.table);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        }</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    };</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="keyword">struct </span>FullyQualifiedTableColumn</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        FullyQualifiedTableName table;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        std::string column;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        <span class="keywordtype">bool</span> operator==(FullyQualifiedTableColumn <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>            <span class="keywordflow">return</span> table == other.table &amp;&amp; column == other.column;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        }</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        <span class="keywordtype">bool</span> operator!=(FullyQualifiedTableColumn <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>            <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == other);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        <span class="keywordtype">bool</span> operator&lt;(FullyQualifiedTableColumn <span class="keyword">const</span>&amp; other) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>            <span class="keywordflow">return</span> std::tie(table, column) &lt; std::tie(other.table, other.column);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        }</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    };</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keyword">struct </span>FullyQualifiedTableColumnSequence</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        FullyQualifiedTableName table;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        std::vector&lt;std::string&gt; columns;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    };</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(FullyQualifiedTableColumnSequence <span class="keyword">const</span>&amp; a, FullyQualifiedTableColumnSequence <span class="keyword">const</span>&amp; b) <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    {</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">return</span> std::tie(a.table, a.columns) &lt; std::tie(b.table, b.columns);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keyword">struct </span>ForeignKeyConstraint</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        FullyQualifiedTableColumnSequence foreignKey;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        FullyQualifiedTableColumnSequence primaryKey;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    };</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(ForeignKeyConstraint <span class="keyword">const</span>&amp; a, ForeignKeyConstraint <span class="keyword">const</span>&amp; b) <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        <span class="keywordflow">return</span> std::tie(a.foreignKey, a.primaryKey) &lt; std::tie(b.foreignKey, b.primaryKey);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    }</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment"></span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">    /// Represents an index definition on a table.</span></div>
<div class="foldopen" id="foldopen00099" data-start="{" data-end="};">
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html">   99</a></span><span class="comment"></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html">IndexDefinition</a></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">        /// The name of the index.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#a8d75bccd08fdf35b48d793ca62eb0e82">  102</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#a8d75bccd08fdf35b48d793ca62eb0e82">name</a>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment"></span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment">        /// The columns in the index (in order for composite indexes).</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#ab877b33adddf8288d0b91db1d1cef4a2">  105</a></span><span class="comment"></span>        std::vector&lt;std::string&gt; <a class="code hl_variable" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#ab877b33adddf8288d0b91db1d1cef4a2">columns</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment"></span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">        /// Whether the index enforces uniqueness.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#afc6863e451eb5828a2c241e56743c600">  108</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#afc6863e451eb5828a2c241e56743c600">isUnique</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    };</div>
</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keyword">using </span>KeyPair = std::pair&lt;FullyQualifiedTableName <span class="comment">/*fk table*/</span>, FullyQualifiedTableName <span class="comment">/*pk table*/</span>&gt;;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator&lt;(KeyPair <span class="keyword">const</span>&amp; a, KeyPair <span class="keyword">const</span>&amp; b)</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <span class="keywordflow">return</span> std::tie(a.first, a.second) &lt; std::tie(b.first, b.second);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment"></span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment">    /// Holds the definition of a column in a SQL table as read from the database schema.</span></div>
<div class="foldopen" id="foldopen00119" data-start="{" data-end="};">
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html">  119</a></span><span class="comment"></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html">Column</a></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    {<span class="comment"></span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">        /// The name of the column.</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a095d9eb7ed4abef29c07a9a563c0da72">  122</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a095d9eb7ed4abef29c07a9a563c0da72">name</a> = {};<span class="comment"></span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">        /// The SQL column type definition.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a515083c477fa7b7c42fe61e3132f9da6">  124</a></span><span class="comment"></span>        SqlColumnTypeDefinition <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a515083c477fa7b7c42fe61e3132f9da6">type</a> = {};<span class="comment"></span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">        /// The dialect-dependent type string.</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a79e8994c6ba75988730278e4e2d3db73">  126</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a79e8994c6ba75988730278e4e2d3db73">dialectDependantTypeString</a> = {};<span class="comment"></span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">        /// Whether the column allows NULL values.</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a12db4219734a5dd38708ae443171f36b">  128</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a12db4219734a5dd38708ae443171f36b">isNullable</a> = <span class="keyword">true</span>;<span class="comment"></span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="comment">        /// Whether the column has a UNIQUE constraint.</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ad3c7ea6282f46828e0e6ba653fd2aafe">  130</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ad3c7ea6282f46828e0e6ba653fd2aafe">isUnique</a> = <span class="keyword">false</span>;<span class="comment"></span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">        /// The size of the column (for character/binary types).</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#aca479b7b343211bb7f024b4315d62ea5">  132</a></span><span class="comment"></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#aca479b7b343211bb7f024b4315d62ea5">size</a> = 0;<span class="comment"></span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment">        /// The number of decimal digits (for numeric types).</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ae0ae7004ded2e4d51226f22755f34a8c">  134</a></span><span class="comment"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ae0ae7004ded2e4d51226f22755f34a8c">decimalDigits</a> = 0;<span class="comment"></span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment">        /// Whether the column auto-increments.</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#afc7a18ace2877b1d1c791062dbdd91e8">  136</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#afc7a18ace2877b1d1c791062dbdd91e8">isAutoIncrement</a> = <span class="keyword">false</span>;<span class="comment"></span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment">        /// Whether the column is a primary key.</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a5e6dfa8e5cd698a3f79634d735be8428">  138</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a5e6dfa8e5cd698a3f79634d735be8428">isPrimaryKey</a> = <span class="keyword">false</span>;<span class="comment"></span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment">        /// Whether the column is a foreign key.</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1e358b0f28cd16323fa55967128bbcce">  140</a></span><span class="comment"></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1e358b0f28cd16323fa55967128bbcce">isForeignKey</a> = <span class="keyword">false</span>;<span class="comment"></span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">        /// The foreign key constraint, if any.</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ab62b2c02aa099813864f9311b4517b50">  142</a></span><span class="comment"></span>        std::optional&lt;ForeignKeyConstraint&gt; <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ab62b2c02aa099813864f9311b4517b50">foreignKeyConstraint</a> {};<span class="comment"></span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment">        /// The default value of the column.</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1c968d8d9cf8634b19730e4532dc9695">  144</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1c968d8d9cf8634b19730e4532dc9695">defaultValue</a> = {};</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    };</div>
</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="comment"></span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="comment">    /// Callback interface for handling events while reading a database schema.</span></div>
<div class="foldopen" id="foldopen00148" data-start="{" data-end="};">
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">  148</a></span><span class="comment"></span>    <span class="keyword">class </span><a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      <span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="comment">        /// Default constructor.</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a76e7f25e2a31b6e38d7f2aa88ddd6941">  152</a></span><span class="comment"></span>        <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a76e7f25e2a31b6e38d7f2aa88ddd6941">EventHandler</a>() = <span class="keywordflow">default</span>;<span class="comment"></span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment">        /// Default move constructor.</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a229b2e055772d6ec35827a8aefc5c6b4">  154</a></span><span class="comment"></span>        <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a229b2e055772d6ec35827a8aefc5c6b4">EventHandler</a>(<a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a>&amp;&amp;) = <span class="keywordflow">default</span>;<span class="comment"></span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="comment">        /// Default copy constructor.</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#af2329bf6d2266dd4309b1b0e55a1116a">  156</a></span><span class="comment"></span>        <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#af2329bf6d2266dd4309b1b0e55a1116a">EventHandler</a>(<a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a> <span class="keyword">const</span>&amp;) = <span class="keywordflow">default</span>;<span class="comment"></span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="comment">        /// Default move assignment operator.</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a55745cb70576b7e2ba0fe8fbe0c2def3">  158</a></span><span class="comment"></span>        <a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a>&amp; <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a55745cb70576b7e2ba0fe8fbe0c2def3">operator=</a>(<a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a>&amp;&amp;) = <span class="keywordflow">default</span>;<span class="comment"></span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment">        /// Default copy assignment operator.</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a67be620aaa7580b9b861a9ce53f00c02">  160</a></span><span class="comment"></span>        <a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a>&amp; <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a67be620aaa7580b9b861a9ce53f00c02">operator=</a>(<a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a> <span class="keyword">const</span>&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <span class="keyword">virtual</span> <a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">~EventHandler</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="comment"></span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="comment">        /// Called when the names of all tables are read.</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a38e6606ee966480e7a5ab0b1069cf659">  164</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a38e6606ee966480e7a5ab0b1069cf659">OnTables</a>(std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; tables) = 0;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment"></span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="comment">        /// Called for each table. Returns true to process this table, false to skip it.</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="comment">        /// @param schema The schema the table belongs to.</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="comment">        /// @param table The name of the table.</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a8870abb3a72671cdff7649b1b65f1db2">  169</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a8870abb3a72671cdff7649b1b65f1db2">OnTable</a>(std::string_view schema, std::string_view table) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">        /// Called when the primary keys of a table are read.</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a2b6dcf255de2b88db441e5f99a8853c2">  171</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a2b6dcf255de2b88db441e5f99a8853c2">OnPrimaryKeys</a>(std::string_view table, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; columns) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">        /// Called when a foreign key constraint is read.</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adaf530d21f5ca78f77d0269e1cbd925c">  173</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adaf530d21f5ca78f77d0269e1cbd925c">OnForeignKey</a>(ForeignKeyConstraint <span class="keyword">const</span>&amp; foreignKeyConstraint) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="comment">        /// Called for each column in a table.</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a11394d602f3ebb20d53a20cf1f853d8a">  175</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a11394d602f3ebb20d53a20cf1f853d8a">OnColumn</a>(<a class="code hl_struct" href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html">Column</a> <span class="keyword">const</span>&amp; column) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment">        /// Called when an external foreign key referencing this table is read.</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adabe124eab18853596c5feeb6bdb3111">  177</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adabe124eab18853596c5feeb6bdb3111">OnExternalForeignKey</a>(ForeignKeyConstraint <span class="keyword">const</span>&amp; foreignKeyConstraint) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">        /// Called when the indexes of a table are read.</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a286d76cbfaa1046897785df1f70ed7e7">  179</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a286d76cbfaa1046897785df1f70ed7e7">OnIndexes</a>(std::vector&lt;IndexDefinition&gt; <span class="keyword">const</span>&amp; indexes) = 0;<span class="comment"></span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="comment">        /// Called when a table&#39;s schema reading is complete.</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno"><a class="line" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a68c45a3bcd95c96b9eaee2253af5d209">  181</a></span><span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a68c45a3bcd95c96b9eaee2253af5d209">OnTableEnd</a>() = 0;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    };</div>
</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment"></span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="comment">    /// Reads all tables in the given database and schema and calls the event handler for each table.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="comment">    /// @param stmt The SQL statement to use for reading the database schema.</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment">    /// @param database The name of the database to read the schema from.</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span><span class="comment">    /// @param schema The name of the schema to read the schema from.</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span><span class="comment">    /// @param eventHandler The SAX-style event handler to call for each table.</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="comment">    /// @note The event handler is called for each table in the database and schema.</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="comment"></span>    LIGHTWEIGHT_API <span class="keywordtype">void</span> ReadAllTables(<a class="code hl_class" href="../../db/dad/classLightweight_1_1SqlStatement.html">SqlStatement</a>&amp; stmt,</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                                       std::string_view database,</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>                                       std::string_view schema,</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>                                       <a class="code hl_class" href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">EventHandler</a>&amp; eventHandler);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="comment"></span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="comment">    /// Holds the definition of a table in a SQL database as read from the database schema.</span></div>
<div class="foldopen" id="foldopen00198" data-start="{" data-end="};">
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html">  198</a></span><span class="comment"></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html">Table</a></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="comment">// FullyQualifiedTableName name;</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment"></span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">        /// The schema the table belongs to.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#aa8375cb544d561dd4f92edb9ea8c9b36">  203</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#aa8375cb544d561dd4f92edb9ea8c9b36">schema</a>;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment"></span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="comment">        /// The name of the table.</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#ae37d4398d5efb5c7829fcc3c4117d70e">  206</a></span><span class="comment"></span>        std::string <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#ae37d4398d5efb5c7829fcc3c4117d70e">name</a>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment"></span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment">        /// The columns of the table.</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#af1b81bd9690baa021709d470bee36bae">  209</a></span><span class="comment"></span>        std::vector&lt;Column&gt; <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#af1b81bd9690baa021709d470bee36bae">columns</a> {};</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="comment"></span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="comment">        /// The foreign keys of the table.</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a774feb3fa67174c1d22ffa9463877e9e">  212</a></span><span class="comment"></span>        std::vector&lt;ForeignKeyConstraint&gt; <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a774feb3fa67174c1d22ffa9463877e9e">foreignKeys</a> {};</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment"></span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="comment">        /// The foreign keys of other tables that reference this table.</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#adcc20146f5ad58c2aa8848920a8d6124">  215</a></span><span class="comment"></span>        std::vector&lt;ForeignKeyConstraint&gt; <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#adcc20146f5ad58c2aa8848920a8d6124">externalForeignKeys</a> {};</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="comment"></span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="comment">        /// The primary keys of the table.</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a887fd3f6aeda2b77532b4ad88c9c9ed3">  218</a></span><span class="comment"></span>        std::vector&lt;std::string&gt; <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a887fd3f6aeda2b77532b4ad88c9c9ed3">primaryKeys</a> {};</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="comment"></span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment">        /// The indexes on the table (excluding primary key index).</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno"><a class="line" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#afb92036f7695851c2246f5574d7f3bde">  221</a></span><span class="comment"></span>        std::vector&lt;IndexDefinition&gt; <a class="code hl_variable" href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#afb92036f7695851c2246f5574d7f3bde">indexes</a> {};</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    };</div>
</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment"></span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">    /// A list of tables.</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment"></span>    <span class="keyword">using </span>TableList = std::vector&lt;Table&gt;;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keyword">using </span>ReadAllTablesCallback = std::function&lt;void(std::string_view <span class="comment">/*tableName*/</span>, <span class="keywordtype">size_t</span> <span class="comment">/*current*/</span>, <span class="keywordtype">size_t</span> <span class="comment">/*total*/</span>)&gt;;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span><span class="comment"></span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span><span class="comment">    /// Callback invoked when a table&#39;s schema is fully read.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="comment">    /// This callback is called for each table as soon as its schema (columns, keys, constraints)</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">    /// is complete. Useful for streaming tables to consumers without waiting for all tables.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment"></span>    <span class="keyword">using </span>TableReadyCallback = std::function&lt;void(Table&amp;&amp;)&gt;;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment"></span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment">    /// Predicate to filter tables before reading their full schema.</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="comment">    /// @param schema The schema name.</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="comment">    /// @param tableName The table name.</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="comment">    /// @return true to include the table (read its full schema), false to skip it.</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span><span class="comment">    /// When provided, tables that don&#39;t match the predicate will have their detailed</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="comment">    /// schema (columns, keys, constraints) skipped, improving performance when only</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment">    /// a subset of tables is needed.</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="comment"></span>    <span class="keyword">using </span>TableFilterPredicate = std::function&lt;bool(std::string_view <span class="comment">/*schema*/</span>, std::string_view <span class="comment">/*tableName*/</span>)&gt;;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="comment"></span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">    /// Retrieves all tables in the given @p database and @p schema.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment">    /// @param stmt The SQL statement to use for reading.</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">    /// @param database The database name.</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="comment">    /// @param schema The schema name (optional).</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="comment">    /// @param callback Progress callback invoked for each table during scanning.</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment">    /// @param tableReadyCallback Callback invoked when each table&#39;s schema is complete.</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="comment">    /// @param tableFilter Optional predicate to filter tables before reading their full schema.</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">    ///                    If provided, only tables where the predicate returns true will have</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">    ///                    their columns, keys, and constraints read.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment"></span>    LIGHTWEIGHT_API TableList ReadAllTables(<a class="code hl_class" href="../../db/dad/classLightweight_1_1SqlStatement.html">SqlStatement</a>&amp; stmt,</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                                            std::string_view database,</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                                            std::string_view schema = {},</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                                            ReadAllTablesCallback callback = {},</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                                            TableReadyCallback tableReadyCallback = {},</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                                            TableFilterPredicate tableFilter = {});</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="comment"></span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="comment">    /// Retrieves all tables in the given database and schema that have a foreign key to the given table.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment"></span>    LIGHTWEIGHT_API std::vector&lt;ForeignKeyConstraint&gt; AllForeignKeysTo(SqlStatement&amp; stmt,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                                                                       FullyQualifiedTableName <span class="keyword">const</span>&amp; table);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="comment"></span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">    /// Retrieves all tables in the given database and schema that have a foreign key from the given table.</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment"></span>    LIGHTWEIGHT_API std::vector&lt;ForeignKeyConstraint&gt; AllForeignKeysFrom(SqlStatement&amp; stmt,</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                                                                         FullyQualifiedTableName <span class="keyword">const</span>&amp; table);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="comment"></span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="comment">    /// Creats an SQL CREATE TABLE plan for the given table description.</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment">    /// @param tableDescription The description of the table to create the plan for.</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="comment">    /// @return An SQL CREATE TABLE plan for the given table description.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span><span class="comment"></span>    LIGHTWEIGHT_API SqlCreateTablePlan MakeCreateTablePlan(Table <span class="keyword">const</span>&amp; tableDescription);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment"></span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment">    /// Creates an SQL CREATE TABLE plan for all the given table descriptions.</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment">    /// @param tableDescriptions The descriptions of the tables to create the plan for.</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment">    ///</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment">    /// @return An SQL CREATE TABLE plan for all the given table descriptions.</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment"></span>    LIGHTWEIGHT_API std::vector&lt;SqlCreateTablePlan&gt; MakeCreateTablePlan(TableList <span class="keyword">const</span>&amp; tableDescriptions);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>} <span class="comment">// namespace SqlSchema</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>} <span class="comment">// namespace Lightweight</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="keyword">struct </span>std::formatter&lt;Lightweight::SqlSchema::FullyQualifiedTableName&gt;: std::formatter&lt;std::string&gt;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>{</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keyword">auto</span> format(Lightweight::SqlSchema::FullyQualifiedTableName <span class="keyword">const</span>&amp; value, format_context&amp; ctx) <span class="keyword">const</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        -&gt; format_context::iterator</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordtype">string</span> output = std::string(Lightweight::SqlSchema::detail::rtrim(value.schema));</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <span class="keywordflow">if</span> (!output.empty())</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            output += <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keyword">auto</span> <span class="keyword">const</span> trimmedSchema = Lightweight::SqlSchema::detail::rtrim(value.catalog);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        output += trimmedSchema;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="keywordflow">if</span> (!output.empty() &amp;&amp; !trimmedSchema.empty())</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            output += <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        output += Lightweight::SqlSchema::detail::rtrim(value.table);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="keywordflow">return</span> formatter&lt;string&gt;::format(output, ctx);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>};</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="keyword">struct </span>std::formatter&lt;Lightweight::SqlSchema::FullyQualifiedTableColumn&gt;: std::formatter&lt;std::string&gt;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>{</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="keyword">auto</span> format(Lightweight::SqlSchema::FullyQualifiedTableColumn <span class="keyword">const</span>&amp; value, format_context&amp; ctx) <span class="keyword">const</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        -&gt; format_context::iterator</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <span class="keyword">auto</span> <span class="keyword">const</span> table = std::format(<span class="stringliteral">&quot;{}&quot;</span>, value.table);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordflow">if</span> (table.empty())</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            <span class="keywordflow">return</span> formatter&lt;string&gt;::format(std::format(<span class="stringliteral">&quot;{}&quot;</span>, value.column), ctx);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            <span class="keywordflow">return</span> formatter&lt;string&gt;::format(std::format(<span class="stringliteral">&quot;{}.{}&quot;</span>, value.table, value.column), ctx);</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>};</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span> </div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="keyword">struct </span>std::formatter&lt;Lightweight::SqlSchema::FullyQualifiedTableColumnSequence&gt;: std::formatter&lt;std::string&gt;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>{</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="keyword">auto</span> format(Lightweight::SqlSchema::FullyQualifiedTableColumnSequence <span class="keyword">const</span>&amp; value, format_context&amp; ctx) <span class="keyword">const</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        -&gt; format_context::iterator</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keyword">auto</span> <span class="keyword">const</span> resolvedTableName = std::format(<span class="stringliteral">&quot;{}&quot;</span>, value.table);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordtype">string</span> output;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        output += resolvedTableName;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        output += <span class="charliteral">&#39;(&#39;</span>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span><span class="preprocessor">#if !defined(__cpp_lib_ranges_enumerate)</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="keywordtype">int</span> i { -1 };</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; column: value.columns)</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            ++i;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span> [i, column]: value.columns | std::views::enumerate)</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            <span class="keywordflow">if</span> (i != 0)</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                output += <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>            output += column;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        output += <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keywordflow">return</span> formatter&lt;string&gt;::format(output, ctx);</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>};</div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html">Lightweight::SqlSchema::EventHandler</a></div><div class="ttdoc">Callback interface for handling events while reading a database schema.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00148">SqlSchema.hpp:149</a></div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a11394d602f3ebb20d53a20cf1f853d8a"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a11394d602f3ebb20d53a20cf1f853d8a">Lightweight::SqlSchema::EventHandler::OnColumn</a></div><div class="ttdeci">virtual void OnColumn(Column const &amp;column)=0</div><div class="ttdoc">Called for each column in a table.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a229b2e055772d6ec35827a8aefc5c6b4"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a229b2e055772d6ec35827a8aefc5c6b4">Lightweight::SqlSchema::EventHandler::EventHandler</a></div><div class="ttdeci">EventHandler(EventHandler &amp;&amp;)=default</div><div class="ttdoc">Default move constructor.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a286d76cbfaa1046897785df1f70ed7e7"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a286d76cbfaa1046897785df1f70ed7e7">Lightweight::SqlSchema::EventHandler::OnIndexes</a></div><div class="ttdeci">virtual void OnIndexes(std::vector&lt; IndexDefinition &gt; const &amp;indexes)=0</div><div class="ttdoc">Called when the indexes of a table are read.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a2b6dcf255de2b88db441e5f99a8853c2"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a2b6dcf255de2b88db441e5f99a8853c2">Lightweight::SqlSchema::EventHandler::OnPrimaryKeys</a></div><div class="ttdeci">virtual void OnPrimaryKeys(std::string_view table, std::vector&lt; std::string &gt; const &amp;columns)=0</div><div class="ttdoc">Called when the primary keys of a table are read.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a38e6606ee966480e7a5ab0b1069cf659"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a38e6606ee966480e7a5ab0b1069cf659">Lightweight::SqlSchema::EventHandler::OnTables</a></div><div class="ttdeci">virtual void OnTables(std::vector&lt; std::string &gt; const &amp;tables)=0</div><div class="ttdoc">Called when the names of all tables are read.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a55745cb70576b7e2ba0fe8fbe0c2def3"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a55745cb70576b7e2ba0fe8fbe0c2def3">Lightweight::SqlSchema::EventHandler::operator=</a></div><div class="ttdeci">EventHandler &amp; operator=(EventHandler &amp;&amp;)=default</div><div class="ttdoc">Default move assignment operator.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a67be620aaa7580b9b861a9ce53f00c02"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a67be620aaa7580b9b861a9ce53f00c02">Lightweight::SqlSchema::EventHandler::operator=</a></div><div class="ttdeci">EventHandler &amp; operator=(EventHandler const &amp;)=default</div><div class="ttdoc">Default copy assignment operator.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a68c45a3bcd95c96b9eaee2253af5d209"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a68c45a3bcd95c96b9eaee2253af5d209">Lightweight::SqlSchema::EventHandler::OnTableEnd</a></div><div class="ttdeci">virtual void OnTableEnd()=0</div><div class="ttdoc">Called when a table's schema reading is complete.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a76e7f25e2a31b6e38d7f2aa88ddd6941"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a76e7f25e2a31b6e38d7f2aa88ddd6941">Lightweight::SqlSchema::EventHandler::EventHandler</a></div><div class="ttdeci">EventHandler()=default</div><div class="ttdoc">Default constructor.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_a8870abb3a72671cdff7649b1b65f1db2"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#a8870abb3a72671cdff7649b1b65f1db2">Lightweight::SqlSchema::EventHandler::OnTable</a></div><div class="ttdeci">virtual bool OnTable(std::string_view schema, std::string_view table)=0</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_adabe124eab18853596c5feeb6bdb3111"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adabe124eab18853596c5feeb6bdb3111">Lightweight::SqlSchema::EventHandler::OnExternalForeignKey</a></div><div class="ttdeci">virtual void OnExternalForeignKey(ForeignKeyConstraint const &amp;foreignKeyConstraint)=0</div><div class="ttdoc">Called when an external foreign key referencing this table is read.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_adaf530d21f5ca78f77d0269e1cbd925c"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#adaf530d21f5ca78f77d0269e1cbd925c">Lightweight::SqlSchema::EventHandler::OnForeignKey</a></div><div class="ttdeci">virtual void OnForeignKey(ForeignKeyConstraint const &amp;foreignKeyConstraint)=0</div><div class="ttdoc">Called when a foreign key constraint is read.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlSchema_1_1EventHandler_html_af2329bf6d2266dd4309b1b0e55a1116a"><div class="ttname"><a href="../../df/da2/classLightweight_1_1SqlSchema_1_1EventHandler.html#af2329bf6d2266dd4309b1b0e55a1116a">Lightweight::SqlSchema::EventHandler::EventHandler</a></div><div class="ttdeci">EventHandler(EventHandler const &amp;)=default</div><div class="ttdoc">Default copy constructor.</div></div>
<div class="ttc" id="aclassLightweight_1_1SqlStatement_html"><div class="ttname"><a href="../../db/dad/classLightweight_1_1SqlStatement.html">Lightweight::SqlStatement</a></div><div class="ttdoc">High level API for (prepared) raw SQL statements.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6e/SqlStatement_8hpp_source.html#l00052">SqlStatement.hpp:53</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html">Lightweight::SqlSchema::Column</a></div><div class="ttdoc">Holds the definition of a column in a SQL table as read from the database schema.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00119">SqlSchema.hpp:120</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a095d9eb7ed4abef29c07a9a563c0da72"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a095d9eb7ed4abef29c07a9a563c0da72">Lightweight::SqlSchema::Column::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">The name of the column.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00122">SqlSchema.hpp:122</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a12db4219734a5dd38708ae443171f36b"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a12db4219734a5dd38708ae443171f36b">Lightweight::SqlSchema::Column::isNullable</a></div><div class="ttdeci">bool isNullable</div><div class="ttdoc">Whether the column allows NULL values.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00128">SqlSchema.hpp:128</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a1c968d8d9cf8634b19730e4532dc9695"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1c968d8d9cf8634b19730e4532dc9695">Lightweight::SqlSchema::Column::defaultValue</a></div><div class="ttdeci">std::string defaultValue</div><div class="ttdoc">The default value of the column.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00144">SqlSchema.hpp:144</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a1e358b0f28cd16323fa55967128bbcce"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a1e358b0f28cd16323fa55967128bbcce">Lightweight::SqlSchema::Column::isForeignKey</a></div><div class="ttdeci">bool isForeignKey</div><div class="ttdoc">Whether the column is a foreign key.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00140">SqlSchema.hpp:140</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a515083c477fa7b7c42fe61e3132f9da6"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a515083c477fa7b7c42fe61e3132f9da6">Lightweight::SqlSchema::Column::type</a></div><div class="ttdeci">SqlColumnTypeDefinition type</div><div class="ttdoc">The SQL column type definition.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00124">SqlSchema.hpp:124</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a5e6dfa8e5cd698a3f79634d735be8428"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a5e6dfa8e5cd698a3f79634d735be8428">Lightweight::SqlSchema::Column::isPrimaryKey</a></div><div class="ttdeci">bool isPrimaryKey</div><div class="ttdoc">Whether the column is a primary key.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00138">SqlSchema.hpp:138</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_a79e8994c6ba75988730278e4e2d3db73"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#a79e8994c6ba75988730278e4e2d3db73">Lightweight::SqlSchema::Column::dialectDependantTypeString</a></div><div class="ttdeci">std::string dialectDependantTypeString</div><div class="ttdoc">The dialect-dependent type string.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00126">SqlSchema.hpp:126</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_ab62b2c02aa099813864f9311b4517b50"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ab62b2c02aa099813864f9311b4517b50">Lightweight::SqlSchema::Column::foreignKeyConstraint</a></div><div class="ttdeci">std::optional&lt; ForeignKeyConstraint &gt; foreignKeyConstraint</div><div class="ttdoc">The foreign key constraint, if any.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00142">SqlSchema.hpp:142</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_aca479b7b343211bb7f024b4315d62ea5"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#aca479b7b343211bb7f024b4315d62ea5">Lightweight::SqlSchema::Column::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">The size of the column (for character/binary types).</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00132">SqlSchema.hpp:132</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_ad3c7ea6282f46828e0e6ba653fd2aafe"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ad3c7ea6282f46828e0e6ba653fd2aafe">Lightweight::SqlSchema::Column::isUnique</a></div><div class="ttdeci">bool isUnique</div><div class="ttdoc">Whether the column has a UNIQUE constraint.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00130">SqlSchema.hpp:130</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_ae0ae7004ded2e4d51226f22755f34a8c"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#ae0ae7004ded2e4d51226f22755f34a8c">Lightweight::SqlSchema::Column::decimalDigits</a></div><div class="ttdeci">unsigned short decimalDigits</div><div class="ttdoc">The number of decimal digits (for numeric types).</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00134">SqlSchema.hpp:134</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Column_html_afc7a18ace2877b1d1c791062dbdd91e8"><div class="ttname"><a href="../../d2/db8/structLightweight_1_1SqlSchema_1_1Column.html#afc7a18ace2877b1d1c791062dbdd91e8">Lightweight::SqlSchema::Column::isAutoIncrement</a></div><div class="ttdeci">bool isAutoIncrement</div><div class="ttdoc">Whether the column auto-increments.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00136">SqlSchema.hpp:136</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1IndexDefinition_html"><div class="ttname"><a href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html">Lightweight::SqlSchema::IndexDefinition</a></div><div class="ttdoc">Represents an index definition on a table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00099">SqlSchema.hpp:100</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1IndexDefinition_html_a8d75bccd08fdf35b48d793ca62eb0e82"><div class="ttname"><a href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#a8d75bccd08fdf35b48d793ca62eb0e82">Lightweight::SqlSchema::IndexDefinition::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">The name of the index.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00102">SqlSchema.hpp:102</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1IndexDefinition_html_ab877b33adddf8288d0b91db1d1cef4a2"><div class="ttname"><a href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#ab877b33adddf8288d0b91db1d1cef4a2">Lightweight::SqlSchema::IndexDefinition::columns</a></div><div class="ttdeci">std::vector&lt; std::string &gt; columns</div><div class="ttdoc">The columns in the index (in order for composite indexes).</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00105">SqlSchema.hpp:105</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1IndexDefinition_html_afc6863e451eb5828a2c241e56743c600"><div class="ttname"><a href="../../d6/de6/structLightweight_1_1SqlSchema_1_1IndexDefinition.html#afc6863e451eb5828a2c241e56743c600">Lightweight::SqlSchema::IndexDefinition::isUnique</a></div><div class="ttdeci">bool isUnique</div><div class="ttdoc">Whether the index enforces uniqueness.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00108">SqlSchema.hpp:108</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html">Lightweight::SqlSchema::Table</a></div><div class="ttdoc">Holds the definition of a table in a SQL database as read from the database schema.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00198">SqlSchema.hpp:199</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_a774feb3fa67174c1d22ffa9463877e9e"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a774feb3fa67174c1d22ffa9463877e9e">Lightweight::SqlSchema::Table::foreignKeys</a></div><div class="ttdeci">std::vector&lt; ForeignKeyConstraint &gt; foreignKeys</div><div class="ttdoc">The foreign keys of the table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00212">SqlSchema.hpp:212</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_a887fd3f6aeda2b77532b4ad88c9c9ed3"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#a887fd3f6aeda2b77532b4ad88c9c9ed3">Lightweight::SqlSchema::Table::primaryKeys</a></div><div class="ttdeci">std::vector&lt; std::string &gt; primaryKeys</div><div class="ttdoc">The primary keys of the table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00218">SqlSchema.hpp:218</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_aa8375cb544d561dd4f92edb9ea8c9b36"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#aa8375cb544d561dd4f92edb9ea8c9b36">Lightweight::SqlSchema::Table::schema</a></div><div class="ttdeci">std::string schema</div><div class="ttdoc">The schema the table belongs to.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00203">SqlSchema.hpp:203</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_adcc20146f5ad58c2aa8848920a8d6124"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#adcc20146f5ad58c2aa8848920a8d6124">Lightweight::SqlSchema::Table::externalForeignKeys</a></div><div class="ttdeci">std::vector&lt; ForeignKeyConstraint &gt; externalForeignKeys</div><div class="ttdoc">The foreign keys of other tables that reference this table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00215">SqlSchema.hpp:215</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_ae37d4398d5efb5c7829fcc3c4117d70e"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#ae37d4398d5efb5c7829fcc3c4117d70e">Lightweight::SqlSchema::Table::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">The name of the table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00206">SqlSchema.hpp:206</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_af1b81bd9690baa021709d470bee36bae"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#af1b81bd9690baa021709d470bee36bae">Lightweight::SqlSchema::Table::columns</a></div><div class="ttdeci">std::vector&lt; Column &gt; columns</div><div class="ttdoc">The columns of the table.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00209">SqlSchema.hpp:209</a></div></div>
<div class="ttc" id="astructLightweight_1_1SqlSchema_1_1Table_html_afb92036f7695851c2246f5574d7f3bde"><div class="ttname"><a href="../../d3/dda/structLightweight_1_1SqlSchema_1_1Table.html#afb92036f7695851c2246f5574d7f3bde">Lightweight::SqlSchema::Table::indexes</a></div><div class="ttdeci">std::vector&lt; IndexDefinition &gt; indexes</div><div class="ttdoc">The indexes on the table (excluding primary key index).</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1c/SqlSchema_8hpp_source.html#l00221">SqlSchema.hpp:221</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_07cc544e6394bf3dfdd028b8dfeac742.html">Lightweight</a></li><li class="navelem"><b>SqlSchema.hpp</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
