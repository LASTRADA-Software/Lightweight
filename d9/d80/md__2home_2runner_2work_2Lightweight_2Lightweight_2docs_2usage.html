<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lightweight: Usage Examples</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lightweight<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d9/d80/md__2home_2runner_2work_2Lightweight_2Lightweight_2docs_2usage.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Usage Examples</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="usage-examples"></a> </p>
<h1><a class="anchor" id="configure-default-connection-information-to-the-database"></a>
Configure default connection information to the database</h1>
<p>To connect to the database you need to provide connection string that library uses to establish connection and you can check if it alive in the following way </p><div class="fragment"><div class="line"><a class="code hl_function" href="../../d7/d7b/classSqlConnection.html#a5f49d6d04ccccfc9110f0d6f5d8bb662">SqlConnection::SetDefaultConnectionString</a>(<a class="code hl_struct" href="../../d0/d8e/structSqlConnectionString.html">SqlConnectionString</a> { </div>
<div class="line">    .value = std::format(<span class="stringliteral">&quot;DRIVER=SQLite3;Database=test.sqlite&quot;</span>)</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> sqlConnection = <a class="code hl_class" href="../../d7/d7b/classSqlConnection.html">SqlConnection</a>();</div>
<div class="line"><span class="keywordflow">if</span> (!sqlConnection.IsAlive())</div>
<div class="line">{</div>
<div class="line">    std::println(<span class="stringliteral">&quot;Failed to connect to the database: {}&quot;</span>,</div>
<div class="line">                 <a class="code hl_function" href="../../d3/dbc/structSqlErrorInfo.html#a3c751203bd9c041162147b388681cf73">SqlErrorInfo::fromConnectionHandle</a>(sqlConnection.NativeHandle()));</div>
<div class="line">    std::abort();</div>
<div class="line">}</div>
<div class="ttc" id="aclassSqlConnection_html"><div class="ttname"><a href="../../d7/d7b/classSqlConnection.html">SqlConnection</a></div><div class="ttdoc">Represents a connection to a SQL database.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/df9/SqlConnection_8hpp_source.html#l00036">SqlConnection.hpp:37</a></div></div>
<div class="ttc" id="aclassSqlConnection_html_a5f49d6d04ccccfc9110f0d6f5d8bb662"><div class="ttname"><a href="../../d7/d7b/classSqlConnection.html#a5f49d6d04ccccfc9110f0d6f5d8bb662">SqlConnection::SetDefaultConnectionString</a></div><div class="ttdeci">static void SetDefaultConnectionString(SqlConnectionString const &amp;connectionString) noexcept</div></div>
<div class="ttc" id="astructSqlConnectionString_html"><div class="ttname"><a href="../../d0/d8e/structSqlConnectionString.html">SqlConnectionString</a></div><div class="ttdoc">Represents an ODBC connection string.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d24/SqlConnectInfo_8hpp_source.html#l00014">SqlConnectInfo.hpp:15</a></div></div>
<div class="ttc" id="astructSqlErrorInfo_html_a3c751203bd9c041162147b388681cf73"><div class="ttname"><a href="../../d3/dbc/structSqlErrorInfo.html#a3c751203bd9c041162147b388681cf73">SqlErrorInfo::fromConnectionHandle</a></div><div class="ttdeci">static SqlErrorInfo fromConnectionHandle(SQLHDBC hDbc)</div><div class="ttdoc">Constructs an ODBC error info object from the given ODBC connection handle.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d02/SqlError_8hpp_source.html#l00035">SqlError.hpp:35</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="raw-sql-queries"></a>
Raw SQL Queries</h1>
<p>You can directly make a call to the database using <code>ExecuteDirect</code> function, for example </p><div class="fragment"><div class="line"><span class="keyword">auto</span> stmt = <a class="code hl_class" href="../../df/d17/classSqlStatement.html">SqlStatement</a> {};</div>
<div class="line">stmt.<a class="code hl_function" href="../../df/d17/classSqlStatement.html#a945c53d6f2882289703f9ac98f3f171c">ExecuteDirect</a>(R<span class="stringliteral">&quot;(&quot;SELECT &quot;a&quot;, &quot;b&quot;, &quot;c&quot; FROM &quot;That&quot; ORDER BY &quot;That&quot;.&quot;b&quot; DESC)&quot;));</span></div>
<div class="line"><span class="stringliteral"></span><span class="keywordflow">while</span> (stmt.FetchRow())</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">auto</span> a = stmt.GetColumn&lt;<span class="keywordtype">int</span>&gt;(1);</div>
<div class="line">   <span class="keyword">auto</span> b = stmt.GetColumn&lt;<span class="keywordtype">int</span>&gt;(2);</div>
<div class="line">   <span class="keyword">auto</span> c = stmt.GetColumn&lt;<span class="keywordtype">int</span>&gt;(3);</div>
<div class="line">   std::println(<span class="stringliteral">&quot;{}|{}|{}&quot;</span>, a, b,c);</div>
<div class="line">}</div>
<div class="ttc" id="aclassSqlStatement_html"><div class="ttname"><a href="../../df/d17/classSqlStatement.html">SqlStatement</a></div><div class="ttdoc">High level API for (prepared) raw SQL statements.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6e/SqlStatement_8hpp_source.html#l00045">SqlStatement.hpp:46</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_a945c53d6f2882289703f9ac98f3f171c"><div class="ttname"><a href="../../df/d17/classSqlStatement.html#a945c53d6f2882289703f9ac98f3f171c">SqlStatement::ExecuteDirect</a></div><div class="ttdeci">LIGHTWEIGHT_API void ExecuteDirect(std::string_view const &amp;query, std::source_location location=std::source_location::current())</div><div class="ttdoc">Executes the given query directly.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="prepared-statements"></a>
Prepared Statements</h1>
<p>You can also use prepared statements to execute queries, for example </p><div class="fragment"><div class="line"><span class="keyword">struct </span>Record { <span class="keywordtype">int</span> a; <span class="keywordtype">int</span> b; <span class="keywordtype">int</span> c; };</div>
<div class="line"><span class="keyword">auto</span> conn = <a class="code hl_class" href="../../d7/d7b/classSqlConnection.html">SqlConnection</a> {};</div>
<div class="line"><span class="keyword">auto</span> stmt = <a class="code hl_class" href="../../df/d17/classSqlStatement.html">SqlStatement</a> { conn };</div>
<div class="line">stmt.<a class="code hl_function" href="../../df/d17/classSqlStatement.html#ad1f82687b79ea6c3027839204818e9da">Prepare</a>(<span class="stringliteral">&quot;SELECT a, b, c FROM That WHERE a = ? OR b = ?&quot;</span>);</div>
<div class="line">stmt.Execute(42, 43);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="../../d7/d13/classSqlResultCursor.html">SqlResultCursor</a> cursor = stmt.GetResultCursor();</div>
<div class="line"><span class="keyword">auto</span> record = Record {};</div>
<div class="line">cursor.<a class="code hl_function" href="../../d7/d13/classSqlResultCursor.html#a4153151b990ce9f7b85f1c9f7f3ed629">BindOutputColumns</a>&lt;Record&gt;(&amp;record.a, &amp;rcord.b, &amp;record.c);</div>
<div class="line"><span class="keywordflow">while</span> (cursor.<a class="code hl_function" href="../../d7/d13/classSqlResultCursor.html#a4cf78ea9924918a4ea318bb1dc45fe2c">FetchRow</a>())</div>
<div class="line">    std::println(<span class="stringliteral">&quot;{}|{}|{}&quot;</span>, a, b, c);</div>
<div class="ttc" id="aclassSqlResultCursor_html"><div class="ttname"><a href="../../d7/d13/classSqlResultCursor.html">SqlResultCursor</a></div><div class="ttdoc">API for reading an SQL query result set.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6e/SqlStatement_8hpp_source.html#l00260">SqlStatement.hpp:261</a></div></div>
<div class="ttc" id="aclassSqlResultCursor_html_a4153151b990ce9f7b85f1c9f7f3ed629"><div class="ttname"><a href="../../d7/d13/classSqlResultCursor.html#a4153151b990ce9f7b85f1c9f7f3ed629">SqlResultCursor::BindOutputColumns</a></div><div class="ttdeci">LIGHTWEIGHT_FORCE_INLINE void BindOutputColumns(Args *... args)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6e/SqlStatement_8hpp_source.html#l00295">SqlStatement.hpp:295</a></div></div>
<div class="ttc" id="aclassSqlResultCursor_html_a4cf78ea9924918a4ea318bb1dc45fe2c"><div class="ttname"><a href="../../d7/d13/classSqlResultCursor.html#a4cf78ea9924918a4ea318bb1dc45fe2c">SqlResultCursor::FetchRow</a></div><div class="ttdeci">LIGHTWEIGHT_FORCE_INLINE bool FetchRow()</div><div class="ttdoc">Fetches the next row of the result set.</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d6e/SqlStatement_8hpp_source.html#l00307">SqlStatement.hpp:307</a></div></div>
<div class="ttc" id="aclassSqlStatement_html_ad1f82687b79ea6c3027839204818e9da"><div class="ttname"><a href="../../df/d17/classSqlStatement.html#ad1f82687b79ea6c3027839204818e9da">SqlStatement::Prepare</a></div><div class="ttdeci">LIGHTWEIGHT_API void Prepare(std::string_view query) &amp;</div></div>
</div><!-- fragment --><h1><a class="anchor" id="sql-query-builder"></a>
SQL Query Builder</h1>
<p>Or you can constuct statement using <code><a class="el" href="../../d0/d78/classSqlQueryBuilder.html" title="API Entry point for building SQL queries.">SqlQueryBuilder</a></code> for different databases </p><div class="fragment"><div class="line"><span class="keyword">auto</span> sqliteQueryBuilder = <a class="code hl_class" href="../../d0/d78/classSqlQueryBuilder.html">SqlQueryBuilder</a>(formatter);</div>
<div class="line"><span class="keyword">auto</span> <span class="keyword">const</span> sqlQuery =  sqliteQueryBuilder.FromTable(<span class="stringliteral">&quot;That&quot;</span>)</div>
<div class="line">                .Select()</div>
<div class="line">                .Fields(<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>)</div>
<div class="line">                .Field(<span class="stringliteral">&quot;c&quot;</span>)</div>
<div class="line">                .OrderBy(<a class="code hl_struct" href="../../d1/de4/structSqlQualifiedTableColumnName.html">SqlQualifiedTableColumnName</a> { .tableName = <span class="stringliteral">&quot;That&quot;</span>, .columnName = <span class="stringliteral">&quot;b&quot;</span> },</div>
<div class="line">                         SqlResultOrdering::DESCENDING)</div>
<div class="line">                .All()</div>
<div class="ttc" id="aclassSqlQueryBuilder_html"><div class="ttname"><a href="../../d0/d78/classSqlQueryBuilder.html">SqlQueryBuilder</a></div><div class="ttdoc">API Entry point for building SQL queries.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/dcc/SqlQuery_8hpp_source.html#l00023">SqlQuery.hpp:24</a></div></div>
<div class="ttc" id="astructSqlQualifiedTableColumnName_html"><div class="ttname"><a href="../../d1/de4/structSqlQualifiedTableColumnName.html">SqlQualifiedTableColumnName</a></div><div class="ttdoc">SqlQualifiedTableColumnName represents a column name qualified with a table name.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d83/SqlQuery_2Core_8hpp_source.html#l00042">Core.hpp:43</a></div></div>
</div><!-- fragment --><p>For more info see <code>SqlQuery</code> and <code><a class="el" href="../../dc/df2/classSqlQueryFormatter.html" title="API to format SQL queries for different SQL dialects.">SqlQueryFormatter</a></code> documentation</p>
<h1><a class="anchor" id="high-level-data-mapping"></a>
High level Data Mapping</h1>
<div class="fragment"><div class="line"><span class="comment">// Define a person structure, mapping to a table</span></div>
<div class="line"><span class="comment">// The field members are mapped to the columns in the table,</span></div>
<div class="line"><span class="comment">// and the Field&lt;&gt; template parameter specifies the type of the column.</span></div>
<div class="line"><span class="comment">// Field&lt;&gt; is also used to track what fields are modified and need to be updated.</span></div>
<div class="line"><span class="keyword">struct </span>Person</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="../../df/d27/structField.html">Field&lt;SqlGuid, PrimaryKey::AutoAssign&gt;</a> id;</div>
<div class="line">    <a class="code hl_struct" href="../../df/d27/structField.html">Field&lt;SqlAnsiString&lt;25&gt;</a>&gt; name;</div>
<div class="line">    <a class="code hl_struct" href="../../df/d27/structField.html">Field&lt;bool&gt;</a> is_active { <span class="keyword">true</span> };</div>
<div class="line">    <a class="code hl_struct" href="../../df/d27/structField.html">Field&lt;std::optional&lt;int&gt;</a>&gt; age;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> CRUD(<a class="code hl_class" href="../../dc/dc7/classDataMapper.html">DataMapper</a>&amp; dm)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Creates the table if it does not exist</span></div>
<div class="line">    dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#a6a2df09ef7735f0d0e07886ef1b27457">CreateTable</a>&lt;Person&gt;();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a new person</span></div>
<div class="line">    <span class="keyword">auto</span> person = Person {};</div>
<div class="line">    person.name = <span class="stringliteral">&quot;John Doe&quot;</span>;</div>
<div class="line">    person.is_active = <span class="keyword">true</span>;</div>
<div class="line">    dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#a12e76849c4b2f5b2f558c546f9c4b62f">Create</a>(person);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Update the person</span></div>
<div class="line">    name.age = 25;</div>
<div class="line">    dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#acb83d80931e5cd6259290bc795e362f7">Update</a>(person);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Query the person</span></div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span> <span class="keyword">const</span> po = dm.QuerySingle&lt;Person&gt;(person.id); po)</div>
<div class="line">        std::println(<span class="stringliteral">&quot;Person: {} ({})&quot;</span>, po-&gt;name, <a class="code hl_function" href="../../dc/dc7/classDataMapper.html#a4b974aa78414c5dec9a60c13a35516b0">DataMapper::Inspect</a>(*po));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Query all persons</span></div>
<div class="line">    <span class="keyword">auto</span> <span class="keyword">const</span> persons = dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#a06b74e30cf38c79b44615e2fc31f7563">Query</a>&lt;Person&gt;(); </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Delete the person</span></div>
<div class="line">    dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#acfcb03b2a7b0534cfd27287b93e7b907">Delete</a>(person);</div>
<div class="line">}</div>
<div class="ttc" id="aclassDataMapper_html"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html">DataMapper</a></div><div class="ttdoc">Main API for mapping records to and from the database using high level C++ syntax.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00073">DataMapper.hpp:74</a></div></div>
<div class="ttc" id="aclassDataMapper_html_a06b74e30cf38c79b44615e2fc31f7563"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#a06b74e30cf38c79b44615e2fc31f7563">DataMapper::Query</a></div><div class="ttdeci">std::vector&lt; Record &gt; Query(SqlSelectQueryBuilder::ComposedQuery const &amp;selectQuery, InputParameters &amp;&amp;... inputParameters)</div><div class="ttdoc">Queries multiple records from the database, based on the given query.</div></div>
<div class="ttc" id="aclassDataMapper_html_a12e76849c4b2f5b2f558c546f9c4b62f"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#a12e76849c4b2f5b2f558c546f9c4b62f">DataMapper::Create</a></div><div class="ttdeci">RecordId Create(Record &amp;record)</div><div class="ttdoc">Creates a new record in the database.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00419">DataMapper.hpp:419</a></div></div>
<div class="ttc" id="aclassDataMapper_html_a4b974aa78414c5dec9a60c13a35516b0"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#a4b974aa78414c5dec9a60c13a35516b0">DataMapper::Inspect</a></div><div class="ttdeci">static std::string Inspect(Record const &amp;record)</div><div class="ttdoc">Constructs a human readable string representation of the given record.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00265">DataMapper.hpp:265</a></div></div>
<div class="ttc" id="aclassDataMapper_html_a6a2df09ef7735f0d0e07886ef1b27457"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#a6a2df09ef7735f0d0e07886ef1b27457">DataMapper::CreateTable</a></div><div class="ttdeci">void CreateTable()</div><div class="ttdoc">Creates the table for the given record type.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00364">DataMapper.hpp:364</a></div></div>
<div class="ttc" id="aclassDataMapper_html_acb83d80931e5cd6259290bc795e362f7"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#acb83d80931e5cd6259290bc795e362f7">DataMapper::Update</a></div><div class="ttdeci">void Update(Record &amp;record)</div><div class="ttdoc">Updates the record in the database.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00476">DataMapper.hpp:476</a></div></div>
<div class="ttc" id="aclassDataMapper_html_acfcb03b2a7b0534cfd27287b93e7b907"><div class="ttname"><a href="../../dc/dc7/classDataMapper.html#acfcb03b2a7b0534cfd27287b93e7b907">DataMapper::Delete</a></div><div class="ttdeci">std::size_t Delete(Record const &amp;record)</div><div class="ttdoc">Deletes the record from the database.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4f/DataMapper_8hpp_source.html#l00515">DataMapper.hpp:515</a></div></div>
<div class="ttc" id="astructField_html"><div class="ttname"><a href="../../df/d27/structField.html">Field</a></div><div class="ttdoc">Represents a single column in a table.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dac/Field_8hpp_source.html#l00086">Field.hpp:87</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="simple-row-retrieval-via-structs"></a>
Simple row retrieval via structs</h1>
<p>When only read access is needed, you can use a simple struct to represent the row, and also do not need to wrap the fields into <code><a class="el" href="../../df/d27/structField.html" title="Represents a single column in a table.">Field</a>&lt;&gt;</code> template. The struct must have fields that match the columns in the query. The fields can be of any type that can be converted from the column type. The struct can have more fields than the columns in the query, but the fields that match the columns must be in the same order as the columns in the query.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>SimpleStruct</div>
<div class="line">{</div>
<div class="line">    uint64_t pkFromA;</div>
<div class="line">    uint64_t pkFromB;</div>
<div class="line">    SqlAnsiString&lt;30&gt; c1FromA;</div>
<div class="line">    SqlAnsiString&lt;30&gt; c2FromA;</div>
<div class="line">    SqlAnsiString&lt;30&gt; c1FromB;</div>
<div class="line">    SqlAnsiString&lt;30&gt; c2FromB;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> SimpleStructExample(<a class="code hl_class" href="../../dc/dc7/classDataMapper.html">DataMapper</a>&amp; dm)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">auto</span> maybeObject = dm.<a class="code hl_function" href="../../dc/dc7/classDataMapper.html#a06b74e30cf38c79b44615e2fc31f7563">Query</a>&lt;SimpleString&gt;(</div>
<div class="line">        <span class="stringliteral">&quot;SELECT A.pk, B.pk, A.c1, A.c2, B.c1, B.c2 FROM A LEFT JOIN B ON A.pk = B.pk&quot;</span>); maybeObject)</div>
<div class="line">    ))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; obj : *maybeObject)</div>
<div class="line">            std::println(<span class="stringliteral">&quot;{}&quot;</span>, <a class="code hl_class" href="../../dc/dc7/classDataMapper.html">DataMapper</a>::Inspect(obj));</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
